{"version":3,"sources":["components/Box.js","pages/Mine.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/Input.js","components/Button.js"],"names":["ComponentView","props","children","className","Cache","priceTimer","updatePrice","setTimeout","LabelTitle","title","desc","PageView","useState","totalSupplyNum","setTotalSupplyNum","stakeNum","setStakeNum","withdrawNum","setWithdrawNum","balanceNum","setBalanceNum","totalStake","setTotalStake","earnedNum","setEarnedNum","stakeStatus","setStakeStatus","apy","setApy","tokenTmp","useParams","token","toUpperCase","useEffect","lifetimeObj","mapData","ANOTotalStake","value","ANOBalance","ANOEarned","ANOtotalSupply","pool1APY","ctx","unmapActions","clearTimeout","Input","onChange","text","balance","Button","onClick","event","emit","num","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","length","err","unsupportedIterableToArray","TypeError","placeholder","placeholderText","type","target"],"mappings":"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","file":"static/js/8.dc31ad20.chunk.js","sourcesContent":["/**\n * 双线条按钮\n */\n\nimport React from 'react'\n\nimport './Box.scss';\n\nconst ComponentView = (props) => {\n  const {\n    children = '',\n    className = ''\n  } = props;\n  return (\n    <div className={`outlined-box ${className}`}>\n      <div className=\"box\">\n        { children }\n      </div>\n    </div>\n  );\n};\n\nexport default ComponentView;\n","import { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport ctx, { mapData, unmapActions } from '../events';\nimport Box from '../components/Box';\nimport Input from '../components/Input';\nimport Button from '../components/Button';\nimport './Mine.scss';\nconst Cache = {\n  priceTimer: null\n};\n\nconst updatePrice = () => {\n  // 获取合约数据\n  Cache.priceTimer = setTimeout(updatePrice, 1000);\n};\n\n\nconst LabelTitle = (props) => (\n  <>\n    <div className=\"label-title\">\n      {props.title}\n    </div>\n    <div className=\"label-desc\">\n      {props.desc}\n    </div>\n  </>\n);\n\nconst PageView = () => {\n  const [totalSupplyNum, setTotalSupplyNum] = useState(0);\n  const [stakeNum, setStakeNum] = useState(0);\n  const [withdrawNum, setWithdrawNum] = useState(0);\n  const [balanceNum, setBalanceNum] = useState(0);\n  const [totalStake, setTotalStake] = useState(0);\n  const [earnedNum, setEarnedNum] = useState(0);\n  const [stakeStatus, setStakeStatus] = useState(0);\n  const [apy, setApy] = useState(0);\n  // console.log(useParams(), 111111);\n  const params = useParams();\n  const { token: tokenTmp } = params\n  const [token] = useState(tokenTmp.toUpperCase());\n\n  // 质押\n  const stake = () => {\n    ctx.event.emit('stake', { num: stakeNum, token: token });\n  }\n\n  // 查询奖励\n  const getReward = () => { // 无需带参数，只能提取ano\n    ctx.event.emit('getReward');\n  }\n\n  // 解除质押\n  const withdraw = () => {\n    /*if(withdrawNum<0.1){\n      alert('withdraw Minimum is 0.1');\n      return;\n    }*/\n    ctx.event.emit('withdraw', { num: withdrawNum, token: token });\n  }\n\n  // 更新最大可质押数\n  const updateStakeNum = (text) => {\n    if (text !== '') {\n      setStakeNum(+text);\n    }\n    setStakeNum(text);\n  };\n\n  // 更新最大提币数\n  const updateWithdrawNum = (text) => {\n    if (text !== '') {\n      setWithdrawNum(+text);\n    }\n    setWithdrawNum(text);\n  };\n\n  // INIT\n  useEffect(() => {\n    updatePrice();\n\n    const lifetimeObj = {};\n\n    mapData({\n      // todo，需要区分token\n      ANOTotalStake(value) { setTotalStake(value); },\n      ANOBalance(value) {  setBalanceNum(value); },\n      ANOEarned(value) { setEarnedNum(value); },\n      ANOtotalSupply(value){ setTotalSupplyNum(value); },\n      stakeStatus(value){ setStakeStatus(value); },\n      pool1APY(value){ setApy(value); }\n    }, ctx, lifetimeObj);\n\n    /*let approved = getAsyncData('approved')\n    ctx.data.stakeStatus = approved ? 'approved' : null;*/\n\n\n    return () => {\n      // 注销组件时回收数据监听\n      unmapActions(lifetimeObj);\n      clearTimeout(Cache.priceTimer);\n    }\n  }, []);\n\n  return (\n    <div className=\"page-top\">\n      <div className=\"mine-container\">\n        <div className=\"mine-earning\">\n          <div className=\"desc\">\n            STAKE { token } & EARN ANO\n          </div>\n          <div className=\"title\">\n            20,000 ANO\n          </div>\n          <div className=\"desc vice\">\n            All REWARDS\n          </div>\n        </div>\n        <div className=\"mine-main\">\n          <Box className=\"mine-box\">\n            <div className=\"num-top\">\n              { token } TOKEN STAKED\n            </div>\n            <div className=\"num\">\n              {totalStake}\n            </div>\n            <Input\n              className=\"mine-input\"\n              token={token}\n              value={stakeNum}\n              onChange={updateStakeNum}\n              balance={balanceNum}\n            />\n            <Button className=\"mine-small-button\" onClick={stake}>{stakeStatus?\"STAKE\":\"APPROVE\"}</Button>\n          </Box>\n          <div className=\"mine-mid\">\n            <LabelTitle\n              title=\"222.2236 ANO\"\n              desc=\"Rewards Today\"\n            />\n            <LabelTitle\n              title={totalSupplyNum}\n              desc=\"Total Staked\"\n            />\n          </div>\n          <Box className=\"mine-box\">\n            <div className=\"outlined\">\n              <span>APY</span>\n              <span>{apy}%</span>\n            </div>\n            <div className=\"num\">\n              {earnedNum}\n            </div>\n            <div className=\"num-sub\">\n              ANO EARNED\n            </div>\n            <Button className=\"mine-small-button\" onClick={getReward}>CLAIM</Button>\n          </Box>\n        </div>\n      </div>\n      <Box className=\"mine-box\">\n        <p>Withdraw your principal</p>\n        <Input\n          className=\"mine-input\"\n          token={token}\n          value={withdrawNum}\n          onChange={updateWithdrawNum}\n          balance={totalStake}\n        />\n        <Button className=\"mine-small-button\" onClick={withdraw}>WITHDRAW</Button>\n      </Box>\n\n    </div>\n  );\n};\n\nexport default PageView;\n","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","// bumper\n/**\n * Balance 输入框\n */\n\nimport React from 'react'\n\nimport './Input.scss';\n\nconst ComponentView = (props) => {\n  const {\n    token='',\n    placeholder='',\n    value='',\n    balance=0,\n    onChange=() => {},\n    className=''\n  } = props;\n  const placeholderText = placeholder ? placeholder: `Amount of ${token}`\n  return (\n    <div className={className}>\n      <div className=\"balance-input\">\n        <input\n          type=\"number\"\n          value={value}\n          placeholder={placeholderText}\n          onChange={\n            (event) => onChange(event.target.value)\n          }\n        />\n        <div>\n          <span className=\"max\" onClick={() => onChange(balance)}>Max</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ComponentView;\n","/**\n * 双线条按钮\n */\n\nimport React from 'react'\n\nimport './Button.scss';\n\nconst ComponentView = (props) => {\n  const { children = '', className = '', onClick = () => {} } = props;\n  return (\n    <div className={`outlined-button ${className}`} onClick={onClick}>\n      <div className=\"button\">\n        { children }\n      </div>\n    </div>\n  );\n};\n\nexport default ComponentView;\n"],"sourceRoot":""}