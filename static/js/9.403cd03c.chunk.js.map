{"version":3,"sources":["components/Input.js","components/PercentBox.js","pages/Markets.js"],"names":["ComponentView","props","token","placeholder","value","balance","onChange","className","theme","placeholderText","type","event","target","onClick","Paired","Config","BTOKEN_ADDRESS","CONTRACT_ADDRESS","MARKET_POOL_LIST","SlippageTolerance","pairedAdress","Row","item","colAmt","bcAssetsMap","pairedAmt","bcPrice","colPrice","lend","lendApy","borrow","borrowApy","supply","changeVisible","setIndex","updateOpNum","handleOp","goSwap","onDepositChange","col","openModal","colE","logo","logoPaired","mintRatio","expiry","mintRatioText","expiryText","opVisible","opNum","depositCheck","borrowInterest","lendInterest","impact","impactLimit","index","brAmt","bcAmt","bcSupply","pairedSupply","borrowPairedValue","toFixed","ext","expiryFlag","Math","round","Date","getTime","Number","alt","src","colSpan","style","marginTop","checked","min","PageView","defaultTheme","getDefaultTheme","useState","setTheme","list","setList","modalVisible","setModalVisible","modalNum","setModalNum","assetsMap","setAssetsMap","setPairedAmt","priceMap","setPriceMap","lendApyMap","setLendApyMap","borrowApyMap","setBorrowApyMap","supplyMap","setSupplyMap","switchMy","setSwitchMy","switchInActive","setSwitchInActive","useEffect","getValidPoolList","lifetimeObj","mapData","colAmtMap","Object","assign","bTokenMap","poolLpReserveMap","colPriceMap","bcPriceMap","ctx","unmapActions","concat","num","calPriceImpact","check","valid","checkOpValid","alertError","console","log","emit","bctokenAddress","url","SwapUrl","window","open","newList","inActiveFlag","push","justifyContent","paddingTop","padding","width","showInActive","bcAssets","showMyPosition","MARKET_TABLE_HEADER","map","text","i","placement","title","length","visible","onOk","onCancel","footer","closable"],"mappings":"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","file":"static/js/9.403cd03c.chunk.js","sourcesContent":["// bumper\n/**\n * Balance 输入框\n */\n\nimport React from 'react'\n\nimport './Input.scss';\n\nconst ComponentView = (props) => {\n  const {\n    token='',\n    placeholder='',\n    value='',\n    balance=0,\n    onChange=() => {},\n    className='',\n    theme='dark'\n  } = props;\n  const placeholderText = placeholder ? placeholder: `Amount of ${token}`\n  return (\n    <div className={className}>\n      <div className={`balance-input common-${theme}`}>\n        <input\n          type=\"number\"\n          value={value}\n          placeholder={placeholderText}\n          onChange={\n            (event) => onChange(event.target.value)\n          }\n        />\n        <div>\n          <span className=\"max\" onClick={() => onChange(balance)}>Max</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ComponentView;\n","// bumper\n/**\n * 百分比框框\n */\n\nimport React from 'react'\n\nimport './PercentBox.scss';\n\nconst ComponentView = (props) => {\n  const {\n    balance=0,\n    theme='dark',\n    onClick = () => { },\n    className = ''\n  } = props;\n  return (\n    <div className={className}>\n      <div className={`p-box p-box-${theme}`}>\n        <div className={`p-cell p-cell-${theme}`} onClick={() => { onClick(0.25*balance) }}>25%</div>\n        <div className={`p-cell p-cell-${theme}`} onClick={() => { onClick(0.5*balance) }}>50%</div>\n        <div className={`p-cell p-cell-${theme}`} onClick={() => { onClick(0.75*balance) }}>75%</div>\n        <div className={`p-cell p-cell-${theme}`} onClick={() => { onClick(balance) }}>100%</div>\n      </div>\n    </div>\n  );\n};\n\nexport default ComponentView;\n","// bumper\nimport { useEffect, useState } from 'react';\nimport { Switch, Modal, Tooltip } from 'antd';\n// import SettingFilled from '@ant-design/icons/SettingFilled';\nimport './Markets.scss';\nimport Config from '../config';\nimport ctx, { mapData, unmapActions } from '../events';\nimport { checkOpValid, getDefaultTheme, MARKET_TABLE_HEADER, calPriceImpact, alertError } from '../utils'\nimport Input from '../components/Input';\nimport PercentBox from '../components/PercentBox';\nconst { Paired, BTOKEN_ADDRESS, CONTRACT_ADDRESS, MARKET_POOL_LIST, SlippageTolerance } = Config\nconst pairedAdress = CONTRACT_ADDRESS['PAIRED']\n\nconst Row = (props) => {\n  const { item, theme, colAmt = 0, bcAssetsMap = {}, pairedAmt, bcPrice, colPrice, lendApy: lend, borrowApy: borrow, supply = [], changeVisible, setIndex, updateOpNum, handleOp, goSwap, onDepositChange, openModal } = props;\n  const { col, colE, logo, logoPaired, mintRatio, expiry, mintRatioText, expiryText, opVisible, opNum, depositCheck = false, borrowInterest = 0, lendInterest = 0, impact = 0, impactLimit = false } = item;\n  let { index } = item;\n  const brAmt = bcAssetsMap['BRTOKEN']\n  const bcAmt = bcAssetsMap['BCTOKEN']\n  const [bcSupply, pairedSupply] = supply\n  const borrowPairedValue = (bcPrice * bcSupply).toFixed(2)\n  const ext = {\n    col,\n    colE,\n    mintRatio,\n    expiry,\n    impactLimit\n  }\n  const expiryFlag = Math.round((new Date()).getTime() / 1000) > Number(expiry)\n  if (expiryFlag) { index = 'collect' }\n\n  return (\n    <>\n      <tbody className={`${opVisible ? 'bg-' + theme + '-inner' : 'bg-' + theme}`}>\n        <tr onClick={() => { changeVisible(opVisible, item) }}>\n          <td className=\"titleTd\">\n            <div className=\"market-cell\">\n              <u className=\"card-img-u\">\n                <div className=\"card-img-box\">\n                  <div className=\"col-img-wrap\">\n                    <div className=\"col-img\">\n                      <img alt=\"\" src={logo} />\n                    </div>\n                  </div>\n                  <div className=\"paired-img-wrap\">\n                    <div className=\"paired-img\">\n                      <img alt=\"\" src={logoPaired} />\n                    </div>\n                  </div>\n                </div>\n              </u>\n              <div>\n                <div>\n                  {col}\n                  <span className=\"card-title dotted\"> -${colPrice}</span>\n                  &nbsp;|&nbsp;\n                  {Paired}\n                </div>\n                <div>Mint Ratio: {mintRatioText}</div>\n              </div>\n            </div>\n          </td>\n          <td>{expiryText}</td>\n          <td>{lend}%<br />{borrow}%</td>\n          <td>\n            <span className=\"fz07\">bcToken: </span>{bcAmt}<br />\n            <span className=\"fz07\">brToken: </span>{brAmt}\n          </td>\n        </tr>\n        {\n          opVisible ? (\n            <tr>\n              <td colSpan=\"4\">\n                <div className={`op-box bg-${theme}-inner`}>\n                  {/* <div className=\"op-box-setting\">\n                    <SettingFilled className=\"icon\" onClick={() => { openModal(item) }} />\n                  </div> */}\n                  <div className=\"navigator\">\n                    {\n                      !expiryFlag ?\n                        <>\n                          <div className={`navtab ${index === 'borrow' ? 'active' : ''}`} onClick={() => { setIndex('borrow', item) }}>Borrow</div>\n                          <div className={`navtab ${index === 'lend' ? 'active' : ''}`} onClick={() => { setIndex('lend', item) }}>Lend</div>\n                          <div className={`navtab ${index === 'mint' ? 'active' : ''}`} onClick={() => { setIndex('mint', item) }}>Mint</div>\n                          {\n                            brAmt && bcAmt ?\n                              <div className={`navtab ${index === 'repay' ? 'active' : ''}`} onClick={() => { setIndex('repay', item) }}>Repay</div> : null\n                          }\n                          {\n                            bcAmt ?\n                              <div className={`navtab ${index === 'redeem' ? 'active' : ''}`} onClick={() => { setIndex('redeem', item) }}>Redeem</div> : null\n                          }\n                        </> :\n                        <div className={`navtab ${index === 'collect' ? 'active' : ''}`} onClick={() => { setIndex('collect', item) }}>Collect</div>\n                    }\n                  </div>\n                  {\n                    // borrow tab\n                    index === 'borrow' ? (\n                      <div>\n                        <div className=\"op-tips\">Supply: {pairedSupply} {Paired}</div>\n                        <div className=\"op-row2\">\n                          <div className=\"op-row2-l\">Available: <span className=\"bRed\">{colAmt}</span> {col}</div>\n                          <PercentBox balance={colAmt} theme={theme} onClick={(opNum) => { updateOpNum(opNum, item, 'borrow', supply) }} />\n                        </div>\n                        <div className=\"op-row3\">\n                          <Input\n                            className=\"mine-input\"\n                            token={col}\n                            value={opNum}\n                            onChange={(opNum) => { updateOpNum(opNum, item, 'borrow', supply) }}\n                            balance={colAmt}\n                            theme={theme}\n                          />\n                        </div>\n                        <div className=\"op-tips\">Deposit\n                    <span className=\"bRed\"> {col} </span>to Borrow\n                    <span className=\"bGreen\"> {Paired} </span>\n                        </div>\n                        {\n                          opNum ?\n                            <div>\n                              <div className=\"op-tips yellow\">Interested Owed Before Expiry: {borrowInterest} {Paired}</div>\n                              <div className=\"op-tips yellow\">Annualized Interest Rate: {borrow}%</div>\n                              <div className=\"op-tips yellow\" style={{ marginTop: '8px' }}>Price Impact: {impact}%</div>\n                            </div>\n                            : null\n                        }\n                        <div className=\"op-btn-row\">\n                          <button className={`op-btn-base op-btn ${opNum&&(!impactLimit) ? '' : 'disabled'}`} onClick={() => { handleOp(col, 'borrow', opNum, ext) }}>Confirm Borrow</button>\n                        </div>\n                      </div>\n                    ) : null\n                  }\n                  {\n                    // lend tab\n                    index === 'lend' ? (\n                      <div>\n                        <div className=\"op-tips\">Demand: {borrowPairedValue} {Paired}</div>\n                        <div className=\"op-row2\">\n                          <div className=\"op-row2-l\">Available: <span className=\"bRed\">{pairedAmt}</span> {Paired}</div>\n                          <PercentBox balance={pairedAmt} theme={theme} onClick={(opNum) => { updateOpNum(opNum, item, 'lend', supply) }} />\n                        </div>\n                        <div className=\"op-row3\">\n                          <Input\n                            className=\"mine-input\"\n                            token={Paired}\n                            value={opNum}\n                            onChange={(opNum) => { updateOpNum(opNum, item, 'lend', supply) }}\n                            balance={pairedAmt}\n                            theme={theme}\n                          />\n                        </div>\n                        <div className=\"op-tips\">Lend\n                    <span className=\"bRed\"> {Paired} </span> for\n                    <span className=\"bGreen\"> bcTokens </span>\n                        </div>\n                        {\n                          opNum ?\n                            <div>\n                              <div className=\"op-tips yellow\">Interested Owed Before Expiry: {lendInterest} WBNB</div>\n                              <div className=\"op-tips yellow\">Annualized Interest Rate: {lend}%</div>\n                              <div className=\"op-tips yellow\" style={{ marginTop: '8px' }}>Price Impact: {impact}%</div>\n                            </div>\n                            : null\n                        }\n                        <div className=\"op-btn-row\">\n                          <button className={`op-btn-base op-btn ${opNum&&(!impactLimit) ? '' : 'disabled'} `} onClick={() => { handleOp(col, 'lend', opNum, ext) }}>Confirm Lend</button>\n                          <button className='op-btn-base op-btn-liquidity' onClick={() => { goSwap(colE) }}>+ Liquidity</button>\n                        </div>\n                      </div>\n                    ) : null\n                  }\n                  {\n                    // deposit tab\n                    index === 'mint' ? (\n                      <div>\n                        <div className=\"op-tips\">{depositCheck ? `Deposit ${col} to mint bcTokens and brTokens` : `Deposit ${Paired} to mint bcTokens`} </div>\n                        <div className=\"op-tips yellow\">\n                          {depositCheck ? `1 ${col} mints 25000 bcTokens and brTokens. It will NOT receive Lend APY, use Lend to earn Lend APY` :\n                            `1 ${Paired} mints 1 bcToken. It will NOT receive Lend APY, use Lend to earn Lend APY`}</div>\n                        <div className='tal'>\n                          <Switch checked={depositCheck} onChange={() => { onDepositChange(depositCheck, item) }} />\n                    &nbsp;&nbsp;Use {col}\n                        </div>\n                        <div className=\"op-row2\">\n                          <div className=\"op-row2-l\">Available: <span className=\"bRed\">{depositCheck ? colAmt : pairedAmt}</span> {depositCheck ? col : Paired}</div>\n                          <PercentBox balance={depositCheck ? colAmt : pairedAmt} theme={theme} onClick={(opNum) => { updateOpNum(opNum, item) }} />\n                        </div>\n                        <div className=\"op-row3\">\n                          <Input\n                            className=\"mine-input\"\n                            token={depositCheck ? col : Paired}\n                            value={opNum}\n                            onChange={(opNum) => { updateOpNum(opNum, item) }}\n                            balance={depositCheck ? colAmt : pairedAmt}\n                            theme={theme}\n                          />\n                        </div>\n                        {\n                          depositCheck ?\n                            <div className=\"op-tips\">Deposit\n                    <span className=\"bRed\"> {col} </span> for\n                  <span className=\"bGreen\"> bcTokens </span>&\n                  <span className=\"bGreen\"> brTokens </span>\n                            </div>\n                            :\n                            <div className=\"op-tips\">Deposit\n                      <span className=\"bRed\"> {Paired} </span>for\n                      <span className=\"bGreen\"> bcToken </span>\n                            </div>\n                        }\n                        <div className=\"op-btn-row\">\n                          <button className={`op-btn-base op-btn ${opNum ? '' : 'disabled'} `} onClick={() => { handleOp(col, depositCheck ? 'deposit' : 'mmDeposit', opNum, ext) }}>Confirm Deposit</button>\n                          <button className='op-btn-base op-btn-liquidity' onClick={() => { goSwap(col) }}>+ Liquidity</button>\n                        </div>\n                      </div>\n                    ) : null\n                  }\n                  {\n                    // repay tab\n                    index === 'repay' ? (\n                      <div>\n                        <div className=\"op-row2\">\n                          <div className=\"op-row2-l\">Available: <span className=\"bRed\">{brAmt}</span> brToken</div>\n                          <PercentBox balance={brAmt} theme={theme} onClick={(opNum) => { updateOpNum(opNum, item) }} />\n                        </div>\n                        <div className=\"op-row3\">\n                          <Input\n                            className=\"mine-input\"\n                            token={'brToken'}\n                            value={opNum}\n                            onChange={(opNum) => { updateOpNum(opNum, item) }}\n                            balance={brAmt}\n                            theme={theme}\n                          />\n                        </div>\n                        <div className=\"op-btn-row\">\n                          <button className={`op-btn-base op-btn ${opNum ? '' : 'disabled'}`} onClick={() => { handleOp(col, 'repay', opNum, ext) }}>Confirm Repay</button>\n                        </div>\n                      </div>\n                    ) : null\n                  }\n                  {\n                    // redeem tab\n                    index === 'redeem' ? (\n                      <div>\n                        <div className=\"op-row2\">\n                          <div className=\"op-row2-l\">Available: <span className=\"bRed\">{brAmt}</span> brToken, <span className=\"bRed\">{bcAmt}</span> bcToken</div>\n                          <PercentBox balance={Math.min(brAmt, bcAmt)} theme={theme} onClick={(opNum) => { updateOpNum(opNum, item) }} />\n                        </div>\n                        <div className=\"op-row3\">\n                          <Input\n                            className=\"mine-input\"\n                            token={'bToken'}\n                            value={opNum}\n                            onChange={(opNum) => { updateOpNum(opNum, item) }}\n                            balance={Math.min(brAmt, bcAmt)}\n                            theme={theme}\n                          />\n                        </div>\n                        <div className=\"op-btn-row\">\n                          <button className={`op-btn-base op-btn ${opNum ? '' : 'disabled'}`} onClick={() => { handleOp(col, 'redeem', opNum, ext) }}>Confirm Redeem</button>\n                        </div>\n                      </div>\n                    ) : null\n                  }\n                  {\n                    // collect tab\n                    index === 'collect' ? (\n                      <div>\n                        <div className=\"op-row2\">\n                          <div className=\"op-row2-l\">Available: <span className=\"bRed\">{bcAmt}</span> bcToken</div>\n                          <PercentBox balance={bcAmt} theme={theme} onClick={(opNum) => { updateOpNum(opNum, item) }} />\n                        </div>\n                        <div className=\"op-row3\">\n                          <Input\n                            className=\"mine-input\"\n                            token={'bcToken'}\n                            value={opNum}\n                            onChange={(opNum) => { updateOpNum(opNum, item) }}\n                            balance={bcAmt}\n                            theme={theme}\n                          />\n                        </div>\n                        <div className=\"op-btn-row\">\n                          <button className={`op-btn-base op-btn ${opNum ? '' : 'disabled'}`} onClick={() => { handleOp(col, 'collect', opNum, ext) }}>Confirm collect</button>\n                        </div>\n                      </div>\n                    ) : null\n                  }\n                </div>\n              </td>\n            </tr>\n          ) : null\n        }\n      </tbody>\n    </>\n  )\n}\n\nconst PageView = () => {\n  let defaultTheme = getDefaultTheme();\n  const [theme, setTheme] = useState(defaultTheme);\n  const [list, setList] = useState([]);\n  const [modalVisible, setModalVisible] = useState(false);\n  const [modalNum, setModalNum] = useState(false);\n\n  // 资产map\n  const [assetsMap, setAssetsMap] = useState({\n    'btcb': {},\n    'eth': {}\n  });\n  const [pairedAmt, setPairedAmt] = useState(0); // paired公用\n  const [priceMap, setPriceMap] = useState({});\n  const [lendApyMap, setLendApyMap] = useState({});\n  const [borrowApyMap, setBorrowApyMap] = useState({});\n  const [supplyMap, setSupplyMap] = useState({});\n\n  //switch\n  const [switchMy, setSwitchMy] = useState(false);\n  const [switchInActive, setSwitchInActive] = useState(false);\n\n  // INIT LIST\n  useEffect(() => {\n    const list = getValidPoolList()\n    for (let item of list) {\n      item.opVisible = false\n      item.index = 'borrow'\n      item.opNum = 0\n    }\n    setList(list)\n  }, []);\n\n  // INIT\n  useEffect(() => {\n    const lifetimeObj = {};\n\n    mapData({\n      // theme\n      theme(value) {\n        setTheme(value)\n      },\n      // paired\n      pairedAmt(value) {\n        setPairedAmt(value)\n      },\n      // col\n      colAmtMap(value) {\n        for (let item of MARKET_POOL_LIST) {\n          if (value[item.col]) {\n            assetsMap[item.col] = value[item.col]\n          }\n        }\n        setAssetsMap(Object.assign({}, assetsMap))\n      },\n      // btoken\n      bTokenMap(value) {\n        for (let item of MARKET_POOL_LIST) {\n          if (value[item.colE]) {\n            assetsMap[item.colE] = {}\n            assetsMap[item.colE]['BRTOKEN'] = value[item.colE]['BRTOKEN']\n            assetsMap[item.colE]['BCTOKEN'] = value[item.colE]['BCTOKEN']\n          }\n        }\n        setAssetsMap(Object.assign({}, assetsMap))\n      },\n      // supply\n      poolLpReserveMap(value) {\n        for (let item of MARKET_POOL_LIST) {\n          if (value[item.colE]) {\n            supplyMap[item.colE] = value[item.colE]\n          }\n        }\n        setSupplyMap(Object.assign({}, supplyMap))\n      },\n      // 价格\n      colPriceMap(value) {\n        for (let item of MARKET_POOL_LIST) {\n          if (value[item.col]) {\n            priceMap[item.col] = value[item.col]\n          }\n        }\n        setPriceMap(Object.assign({}, priceMap))\n      },\n      bcPriceMap(value) {\n        for (let item of MARKET_POOL_LIST) {\n          if (value[item.colE]) {\n            priceMap[item.colE] = value[item.colE]\n          }\n        }\n        setPriceMap(Object.assign({}, priceMap))\n      },\n      // apy\n      lendApyMap(value) {\n        setLendApyMap(Object.assign({}, value))\n      },\n      borrowApyMap(value) {\n        setBorrowApyMap(Object.assign({}, value))\n      },\n    }, ctx, lifetimeObj);\n\n    return () => {\n      unmapActions(lifetimeObj);\n    }\n  }, []);\n\n  // methods\n  const changeVisible = (opVisible, item) => {\n    item.opVisible = !opVisible\n    setList([].concat(list))\n  }\n\n  const setIndex = (index, item) => {\n    item.index = index\n    setList([].concat(list))\n  }\n\n  const updateOpNum = (num, item, type = 'other', supply=[]) => {\n    item.opNum = num\n    const bcPrice = priceMap[item.colE]\n    if (type === 'borrow') {\n      item.impact = calPriceImpact(num, supply[0], supply[1], item.mintRatioText, type)\n      item.borrowInterest = (num * Number(item.mintRatioText) * (1 - bcPrice)).toFixed(4)\n    } else if (type === 'lend') {\n      item.impact = calPriceImpact(num, supply[0], supply[1], item.mintRatioText, type)\n      item.lendInterest = (num * ((1 / bcPrice) - 1)).toFixed(4)\n    }\n    item.impactLimit = item.impact > SlippageTolerance\n    setList([].concat(list))\n  }\n\n  const onDepositChange = (check, item) => {\n    item.depositCheck = !check\n    setList([].concat(list))\n  }\n\n  const handleOp = (col, type, opNum, ext) => {\n    let valid = checkOpValid(opNum)\n    if (!valid) {\n      return\n    }\n    let { impactLimit = false } = ext\n    if(impactLimit){\n      alertError('price impact is too large')\n      return\n    }\n    console.log(col, type, opNum, valid)\n    if (type === 'borrow') {\n      ctx.event.emit('depositAndSwapToPaired', { col, num: opNum, ext });\n    }\n    if (type === 'lend') {\n      ctx.event.emit('lend', { col, num: opNum, ext });\n    }\n    if (type === 'deposit') {\n      ctx.event.emit('deposit', { col, num: opNum, ext });\n    }\n    if (type === 'mmDeposit') {\n      ctx.event.emit('mmDeposit', { col, num: opNum, ext });\n    }\n    if (type === 'repay') {\n      ctx.event.emit('repay', { col, num: opNum, ext });\n    }\n    if (type === 'redeem') {\n      ctx.event.emit('redeem', { col, num: opNum, ext });\n    }\n    if (type === 'collect') {\n      ctx.event.emit('collect', { col, num: opNum, ext });\n    }\n  }\n\n  const goSwap = (col) => {\n    let bctokenAddress = BTOKEN_ADDRESS[col]['BCTOKEN']\n    let url = Config.SwapUrl + 'add/' + bctokenAddress + '/' + pairedAdress\n    window.open(url, '_blank')\n  }\n\n  // 弹窗\n  const handleOk = () => {\n    console.log('ok')\n  }\n  const handleCancel = () => {\n    setModalVisible(false)\n  }\n  const openModal = (item) => {\n    console.log(item)\n    setModalVisible(true)\n  }\n\n  // switch op\n  const getValidPoolList = (type = 'valid') => {\n    const list = Config.MARKET_POOL_LIST\n    let newList = []\n    for (let item of list) {\n      if (!item.inActiveFlag) {\n        newList.push(item)\n      }\n    }\n    return type === 'valid' ? newList : list\n  }\n\n  const showMyPosition = () => {\n    setSwitchMy(!switchMy)\n    const list = getValidPoolList()\n    let newList = []\n    for (let item of list) {\n      item.opVisible = false\n      item.index = 'borrow'\n      item.opNum = 0\n      if (!switchMy) {\n        const bcAssets = assetsMap[item.colE]\n        const brAmt = bcAssets['BRTOKEN']\n        const bcAmt = bcAssets['BCTOKEN']\n        if (brAmt || bcAmt) {\n          newList.push(item)\n        }\n      } else {\n        newList.push(item)\n      }\n    }\n    setList(newList)\n  }\n  const showInActive = () => {\n    setSwitchInActive(!switchInActive)\n    const list = getValidPoolList(!switchInActive ? 'all' : 'valid')\n    for (let item of list) {\n      item.opVisible = false\n      item.index = 'borrow'\n      item.opNum = 0\n    }\n    setList(list)\n  }\n\n  return (\n    <div className=\"page-center\" style={{ justifyContent: 'flex-start', paddingTop: '40px', padding: '8px 16px', width: '100%' }}>\n      <div className=\"flex\" style={{ width: '100%' }}>\n        <div className=\"flex1 tal\">\n          <Switch checked={switchInActive} onChange={() => { showInActive() }} />\n                    &nbsp;Show inactive pairs\n        </div>\n        <div className=\"flex1 tar\">\n          <Switch checked={switchMy} onChange={() => { showMyPosition() }} />\n                    &nbsp;Only show my positions\n        </div>\n      </div>\n      <div className={`card bg-${theme}`}>\n        <div className=\"card-container\">\n          <table className=\"card-table\">\n            <thead>\n              <tr>\n                {\n                  MARKET_TABLE_HEADER.map((text, i) =>\n                    <th key={i} className={`${text === 'Due Date' ? 'underline' : ''}`}>\n                      {\n                        text === 'Due Date' ?\n                          <Tooltip placement=\"topLeft\" title={`loan must be repaid before expiry or you will default and lose your collateral.`}>\n                            {text}\n                          </Tooltip>\n                          :\n                          text\n                      }\n                    </th>\n                  )\n                }\n              </tr>\n            </thead>\n            {\n              list.map((item, i) =>\n                <Row \n                  key={i} \n                  item={item} \n                  theme={theme} \n                  colAmt={assetsMap[item.col]} \n                  bcAssetsMap={assetsMap[item.colE]} \n                  pairedAmt={pairedAmt} \n                  colPrice={priceMap[item.col]} \n                  bcPrice={priceMap[item.colE]} \n                  lendApy={lendApyMap[item.colE]} \n                  borrowApy={borrowApyMap[item.colE]} \n                  supply={supplyMap[item.colE]} \n                  changeVisible={changeVisible} \n                  setIndex={setIndex} \n                  updateOpNum={updateOpNum} \n                  handleOp={handleOp} \n                  goSwap={goSwap} \n                  onDepositChange={onDepositChange} \n                  openModal={openModal} \n                />\n              )\n            }\n            {\n              list.length ? null :\n                <tbody>\n                  <tr>\n                    <td colSpan=\"4\" className=\"empty\">No pool in Market!</td>\n                  </tr>\n                </tbody>\n            }\n          </table>\n        </div>\n      </div>\n      <Modal title=\"Settings\" width={320} visible={modalVisible} onOk={handleOk} onCancel={handleCancel} footer={null} closable={false}>\n        <div className=\"dotted\">Slippage Tolerance %</div>\n        <Input\n          className=\"mine-input\"\n          placeholder={'Max Slippage %'}\n          value={modalNum}\n          onChange={(modalNum) => { setModalNum(modalNum) }}\n          balance={100}\n          theme={theme}\n        />\n      </Modal>\n    </div>\n  )\n};\n\nexport default PageView;\n"],"sourceRoot":""}