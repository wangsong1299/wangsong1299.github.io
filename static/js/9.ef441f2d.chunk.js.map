{"version":3,"sources":["components/Input.js","components/PercentBox.js","pages/Markets.js"],"names":["ComponentView","props","token","placeholder","value","balance","onChange","className","theme","placeholderText","type","event","target","onClick","paired","Config","BTOKEN_ADDRESS","CONTRACT_ADDRESS","MARKET_POOL_LIST","pairedAdress","Row","item","colAmt","bcAssetsMap","pairedAmt","bcPrice","colPrice","lend","lendApy","borrow","borrowApy","supply","changeVisible","setIndex","updateOpNum","handleOp","goSwap","onDepositChange","openModal","col","colE","logo","logoPaired","mintRatio","expiry","mintRatioText","expiryText","opVisible","opNum","depositCheck","borrowInterest","lendInterest","impact","index","brAmt","bcAmt","bcSupply","pairedSupply","borrowPairedValue","toFixed","ext","expiryFlag","Math","round","Date","getTime","Number","alt","src","colSpan","style","marginTop","checked","min","PageView","defaultTheme","getDefaultTheme","useState","setTheme","list","setList","modalVisible","setModalVisible","modalNum","setModalNum","assetsMap","setAssetsMap","setPairedAmt","priceMap","setPriceMap","lendApyMap","setLendApyMap","borrowApyMap","setBorrowApyMap","supplyMap","setSupplyMap","switchMy","setSwitchMy","switchInActive","setSwitchInActive","useEffect","getValidPoolList","lifetimeObj","mapData","colAmtMap","Object","assign","bTokenMap","poolLpReserveMap","colPriceMap","bcPriceMap","ctx","unmapActions","concat","num","calPriceImpact","check","valid","checkOpValid","console","log","emit","bctokenAddress","url","swapUrl","window","open","newList","inActiveFlag","push","justifyContent","paddingTop","padding","width","showInActive","bcAssets","showMyPosition","MARKET_TABLE_HEADER","map","text","i","placement","title","length","visible","onOk","onCancel","footer","closable"],"mappings":"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","file":"static/js/9.ef441f2d.chunk.js","sourcesContent":["// bumper\n/**\n * Balance 输入框\n */\n\nimport React from 'react'\n\nimport './Input.scss';\n\nconst ComponentView = (props) => {\n  const {\n    token='',\n    placeholder='',\n    value='',\n    balance=0,\n    onChange=() => {},\n    className='',\n    theme='dark'\n  } = props;\n  const placeholderText = placeholder ? placeholder: `Amount of ${token}`\n  return (\n    <div className={className}>\n      <div className={`balance-input common-${theme}`}>\n        <input\n          type=\"number\"\n          value={value}\n          placeholder={placeholderText}\n          onChange={\n            (event) => onChange(event.target.value)\n          }\n        />\n        <div>\n          <span className=\"max\" onClick={() => onChange(balance)}>Max</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ComponentView;\n","// bumper\n/**\n * 百分比框框\n */\n\nimport React from 'react'\n\nimport './PercentBox.scss';\n\nconst ComponentView = (props) => {\n  const {\n    balance=0,\n    theme='dark',\n    onClick = () => { },\n    className = ''\n  } = props;\n  return (\n    <div className={className}>\n      <div className={`p-box p-box-${theme}`}>\n        <div className={`p-cell p-cell-${theme}`} onClick={() => { onClick(0.25*balance) }}>25%</div>\n        <div className={`p-cell p-cell-${theme}`} onClick={() => { onClick(0.5*balance) }}>50%</div>\n        <div className={`p-cell p-cell-${theme}`} onClick={() => { onClick(0.75*balance) }}>75%</div>\n        <div className={`p-cell p-cell-${theme}`} onClick={() => { onClick(balance) }}>100%</div>\n      </div>\n    </div>\n  );\n};\n\nexport default ComponentView;\n","// bumper\nimport { useEffect, useState } from 'react';\nimport { Switch, Modal, Tooltip } from 'antd';\nimport SettingFilled from '@ant-design/icons/SettingFilled';\nimport './Markets.scss';\nimport Config from '../config';\nimport ctx, { mapData, unmapActions } from '../events';\nimport { checkOpValid, getDefaultTheme, MARKET_TABLE_HEADER, calPriceImpact } from '../utils'\nimport Input from '../components/Input';\nimport PercentBox from '../components/PercentBox';\nconst { paired, BTOKEN_ADDRESS, CONTRACT_ADDRESS, MARKET_POOL_LIST } = Config\nconst pairedAdress = CONTRACT_ADDRESS['PAIRED']\n\nconst Row = (props) => {\n  const { item, theme, colAmt = 0, bcAssetsMap = {}, pairedAmt, bcPrice, colPrice, lendApy: lend, borrowApy: borrow, supply = [], changeVisible, setIndex, updateOpNum, handleOp, goSwap, onDepositChange, openModal } = props;\n  const { col, colE, logo, logoPaired, mintRatio, expiry, mintRatioText, expiryText, opVisible, opNum, depositCheck = false, borrowInterest = 0, lendInterest = 0, impact = 0 } = item;\n  let { index } = item;\n  const brAmt = bcAssetsMap['BRTOKEN']\n  const bcAmt = bcAssetsMap['BCTOKEN']\n  const [bcSupply, pairedSupply] = supply\n  const borrowPairedValue = (bcPrice * bcSupply).toFixed(2)\n  const ext = {\n    col,\n    colE,\n    mintRatio,\n    expiry\n  }\n  const expiryFlag = Math.round((new Date()).getTime() / 1000) > Number(expiry)\n  if (expiryFlag) { index = 'collect' }\n\n  return (\n    <>\n      <tbody className={`${opVisible ? 'bg-' + theme + '-inner' : 'bg-' + theme}`}>\n        <tr onClick={() => { changeVisible(opVisible, item) }}>\n          <td className=\"titleTd\">\n            <div className=\"market-cell\">\n              <u className=\"card-img-u\">\n                <div className=\"card-img-box\">\n                  <div className=\"col-img-wrap\">\n                    <div className=\"col-img\">\n                      <img alt=\"\" src={logo} />\n                    </div>\n                  </div>\n                  <div className=\"paired-img-wrap\">\n                    <div className=\"paired-img\">\n                      <img alt=\"\" src={logoPaired} />\n                    </div>\n                  </div>\n                </div>\n              </u>\n              <div>\n                <div>\n                  {col}\n                  <span className=\"card-title dotted\"> -${colPrice}</span>\n                  &nbsp;|&nbsp;\n                  {paired}\n                </div>\n                <div>Mint Ratio: {mintRatioText}</div>\n              </div>\n            </div>\n          </td>\n          <td>{expiryText}</td>\n          <td>{lend}%<br />{borrow}%</td>\n          <td>\n            <span className=\"fz07\">bcToken: </span>{bcAmt}<br />\n            <span className=\"fz07\">brToken: </span>{brAmt}\n          </td>\n        </tr>\n        {\n          opVisible ? (\n            <tr>\n              <td colSpan=\"4\">\n                <div className={`op-box bg-${theme}-inner`}>\n                  <div className=\"op-box-setting\">\n                    <SettingFilled className=\"icon\" onClick={() => { openModal(item) }} />\n                  </div>\n                  <div className=\"navigator\">\n                    {\n                      !expiryFlag ?\n                        <>\n                          <div className={`navtab ${index === 'borrow' ? 'active' : ''}`} onClick={() => { setIndex('borrow', item) }}>Borrow</div>\n                          <div className={`navtab ${index === 'lend' ? 'active' : ''}`} onClick={() => { setIndex('lend', item) }}>Lend</div>\n                          <div className={`navtab ${index === 'mint' ? 'active' : ''}`} onClick={() => { setIndex('mint', item) }}>Mint</div>\n                          {\n                            brAmt && bcAmt ?\n                              <div className={`navtab ${index === 'repay' ? 'active' : ''}`} onClick={() => { setIndex('repay', item) }}>Repay</div> : null\n                          }\n                          {\n                            bcAmt ?\n                              <div className={`navtab ${index === 'redeem' ? 'active' : ''}`} onClick={() => { setIndex('redeem', item) }}>Redeem</div> : null\n                          }\n                        </> :\n                        <div className={`navtab ${index === 'collect' ? 'active' : ''}`} onClick={() => { setIndex('collect', item) }}>Collect</div>\n                    }\n                  </div>\n                  {\n                    // borrow tab\n                    index === 'borrow' ? (\n                      <div>\n                        <div className=\"op-tips\">Supply: {pairedSupply} {paired}</div>\n                        <div className=\"op-row2\">\n                          <div className=\"op-row2-l\">Available: <span className=\"bRed\">{colAmt}</span> {col}</div>\n                          <PercentBox balance={colAmt} theme={theme} onClick={(opNum) => { updateOpNum(opNum, item, 'borrow', supply) }} />\n                        </div>\n                        <div className=\"op-row3\">\n                          <Input\n                            className=\"mine-input\"\n                            token={col}\n                            value={opNum}\n                            onChange={(opNum) => { updateOpNum(opNum, item, 'borrow', supply) }}\n                            balance={colAmt}\n                            theme={theme}\n                          />\n                        </div>\n                        <div className=\"op-tips\">Deposit\n                    <span className=\"bRed\"> {col} </span>to Borrow\n                    <span className=\"bGreen\"> {paired} </span>\n                        </div>\n                        {\n                          opNum ?\n                            <div>\n                              <div className=\"op-tips yellow\">Interested Owed Before Expiry: {borrowInterest} {paired}</div>\n                              <div className=\"op-tips yellow\">Annualized Interest Rate: {borrow}%</div>\n                              <div className=\"op-tips yellow\" style={{ marginTop: '8px' }}>Price Impact: {impact}%</div>\n                            </div>\n                            : null\n                        }\n                        {/* <div className=\"op-tips dotted yellow\">Slippage Tolerance: 1.00%</div> */}\n                        <div className=\"op-btn-row\">\n                          <button className={`op-btn-base op-btn ${opNum ? '' : 'disabled'}`} onClick={() => { handleOp(col, 'borrow', opNum, ext) }}>Confirm Borrow</button>\n                        </div>\n                      </div>\n                    ) : null\n                  }\n                  {\n                    // lend tab\n                    index === 'lend' ? (\n                      <div>\n                        <div className=\"op-tips\">Demand: {borrowPairedValue} {paired}</div>\n                        <div className=\"op-row2\">\n                          <div className=\"op-row2-l\">Available: <span className=\"bRed\">{pairedAmt}</span> {paired}</div>\n                          <PercentBox balance={pairedAmt} theme={theme} onClick={(opNum) => { updateOpNum(opNum, item, 'lend', supply) }} />\n                        </div>\n                        <div className=\"op-row3\">\n                          <Input\n                            className=\"mine-input\"\n                            token={paired}\n                            value={opNum}\n                            onChange={(opNum) => { updateOpNum(opNum, item, 'lend', supply) }}\n                            balance={pairedAmt}\n                            theme={theme}\n                          />\n                        </div>\n                        <div className=\"op-tips\">Lend\n                    <span className=\"bRed\"> {paired} </span> for\n                    <span className=\"bGreen\"> bcTokens </span>\n                        </div>\n                        {\n                          opNum ?\n                            <div>\n                              <div className=\"op-tips yellow\">Interested Owed Before Expiry: {lendInterest} WBNB</div>\n                              <div className=\"op-tips yellow\">Annualized Interest Rate: {lend}%</div>\n                              <div className=\"op-tips yellow\" style={{ marginTop: '8px' }}>Price Impact: {impact}%</div>\n                            </div>\n                            : null\n                        }\n                        {/* <div className=\"op-tips dotted yellow\">Slippage Tolerance: 1.00%</div> */}\n                        <div className=\"op-btn-row\">\n                          <button className={`op-btn-base op-btn ${opNum ? '' : 'disabled'} `} onClick={() => { handleOp(col, 'lend', opNum, ext) }}>Confirm Lend</button>\n                          <button className='op-btn-base op-btn-liquidity' onClick={() => { goSwap(colE) }}>+ Liquidity</button>\n                        </div>\n                      </div>\n                    ) : null\n                  }\n                  {\n                    // deposit tab\n                    index === 'mint' ? (\n                      <div>\n                        <div className=\"op-tips\">{depositCheck ? `Deposit ${col} to mint bcTokens and brTokens` : `Deposit ${paired} to mint bcTokens`} </div>\n                        <div className=\"op-tips yellow\">\n                          {depositCheck ? `1 ${col} mints 25000 bcTokens and brTokens. It will NOT receive Lend APY, use Lend to earn Lend APY` :\n                            `1 ${paired} mints 1 bcToken. It will NOT receive Lend APY, use Lend to earn Lend APY`}</div>\n                        <div className='tal'>\n                          <Switch checked={depositCheck} onChange={() => { onDepositChange(depositCheck, item) }} />\n                    &nbsp;&nbsp;Use {col}\n                        </div>\n                        <div className=\"op-row2\">\n                          <div className=\"op-row2-l\">Available: <span className=\"bRed\">{depositCheck ? colAmt : pairedAmt}</span> {depositCheck ? col : paired}</div>\n                          <PercentBox balance={depositCheck ? colAmt : pairedAmt} theme={theme} onClick={(opNum) => { updateOpNum(opNum, item) }} />\n                        </div>\n                        <div className=\"op-row3\">\n                          <Input\n                            className=\"mine-input\"\n                            token={depositCheck ? col : paired}\n                            value={opNum}\n                            onChange={(opNum) => { updateOpNum(opNum, item) }}\n                            balance={depositCheck ? colAmt : pairedAmt}\n                            theme={theme}\n                          />\n                        </div>\n                        {\n                          depositCheck ?\n                            <div className=\"op-tips\">Deposit\n                    <span className=\"bRed\"> {col} </span> for\n                  <span className=\"bGreen\"> bcTokens </span>&\n                  <span className=\"bGreen\"> brTokens </span>\n                            </div>\n                            :\n                            <div className=\"op-tips\">Deposit\n                      <span className=\"bRed\"> {paired} </span>for\n                      <span className=\"bGreen\"> bcToken </span>\n                            </div>\n                        }\n                        <div className=\"op-btn-row\">\n                          <button className={`op-btn-base op-btn ${opNum ? '' : 'disabled'} `} onClick={() => { handleOp(col, depositCheck ? 'deposit' : 'mmDeposit', opNum, ext) }}>Confirm Deposit</button>\n                          <button className='op-btn-base op-btn-liquidity' onClick={() => { goSwap(col) }}>+ Liquidity</button>\n                        </div>\n                      </div>\n                    ) : null\n                  }\n                  {\n                    // repay tab\n                    index === 'repay' ? (\n                      <div>\n                        <div className=\"op-row2\">\n                          <div className=\"op-row2-l\">Available: <span className=\"bRed\">{brAmt}</span> brToken</div>\n                          <PercentBox balance={brAmt} theme={theme} onClick={(opNum) => { updateOpNum(opNum, item) }} />\n                        </div>\n                        <div className=\"op-row3\">\n                          <Input\n                            className=\"mine-input\"\n                            token={'brToken'}\n                            value={opNum}\n                            onChange={(opNum) => { updateOpNum(opNum, item) }}\n                            balance={brAmt}\n                            theme={theme}\n                          />\n                        </div>\n                        <div className=\"op-btn-row\">\n                          <button className={`op-btn-base op-btn ${opNum ? '' : 'disabled'}`} onClick={() => { handleOp(col, 'repay', opNum, ext) }}>Confirm Repay</button>\n                        </div>\n                      </div>\n                    ) : null\n                  }\n                  {\n                    // redeem tab\n                    index === 'redeem' ? (\n                      <div>\n                        <div className=\"op-row2\">\n                          <div className=\"op-row2-l\">Available: <span className=\"bRed\">{brAmt}</span> brToken, <span className=\"bRed\">{bcAmt}</span> bcToken</div>\n                          <PercentBox balance={Math.min(brAmt, bcAmt)} theme={theme} onClick={(opNum) => { updateOpNum(opNum, item) }} />\n                        </div>\n                        <div className=\"op-row3\">\n                          <Input\n                            className=\"mine-input\"\n                            token={'bToken'}\n                            value={opNum}\n                            onChange={(opNum) => { updateOpNum(opNum, item) }}\n                            balance={Math.min(brAmt, bcAmt)}\n                            theme={theme}\n                          />\n                        </div>\n                        <div className=\"op-btn-row\">\n                          <button className={`op-btn-base op-btn ${opNum ? '' : 'disabled'}`} onClick={() => { handleOp(col, 'redeem', opNum, ext) }}>Confirm Redeem</button>\n                        </div>\n                      </div>\n                    ) : null\n                  }\n                  {\n                    // collect tab\n                    index === 'collect' ? (\n                      <div>\n                        <div className=\"op-row2\">\n                          <div className=\"op-row2-l\">Available: <span className=\"bRed\">{bcAmt}</span> bcToken</div>\n                          <PercentBox balance={bcAmt} theme={theme} onClick={(opNum) => { updateOpNum(opNum, item) }} />\n                        </div>\n                        <div className=\"op-row3\">\n                          <Input\n                            className=\"mine-input\"\n                            token={'bcToken'}\n                            value={opNum}\n                            onChange={(opNum) => { updateOpNum(opNum, item) }}\n                            balance={bcAmt}\n                            theme={theme}\n                          />\n                        </div>\n                        <div className=\"op-btn-row\">\n                          <button className={`op-btn-base op-btn ${opNum ? '' : 'disabled'}`} onClick={() => { handleOp(col, 'collect', opNum, ext) }}>Confirm collect</button>\n                        </div>\n                      </div>\n                    ) : null\n                  }\n                </div>\n              </td>\n            </tr>\n          ) : null\n        }\n      </tbody>\n    </>\n  )\n}\n\nconst PageView = () => {\n  let defaultTheme = getDefaultTheme();\n  const [theme, setTheme] = useState(defaultTheme);\n  const [list, setList] = useState([]);\n  const [modalVisible, setModalVisible] = useState(false);\n  const [modalNum, setModalNum] = useState(false);\n\n  // 资产map\n  const [assetsMap, setAssetsMap] = useState({\n    'btcb': {},\n    'eth': {}\n  });\n  const [pairedAmt, setPairedAmt] = useState(0); // paired公用\n  const [priceMap, setPriceMap] = useState({});\n  const [lendApyMap, setLendApyMap] = useState({});\n  const [borrowApyMap, setBorrowApyMap] = useState({});\n  const [supplyMap, setSupplyMap] = useState({});\n\n  //switch\n  const [switchMy, setSwitchMy] = useState(false);\n  const [switchInActive, setSwitchInActive] = useState(false);\n\n  // INIT LIST\n  useEffect(() => {\n    const list = getValidPoolList()\n    for (let item of list) {\n      item.opVisible = false\n      item.index = 'borrow'\n      item.opNum = 0\n    }\n    setList(list)\n  }, []);\n\n  // INIT\n  useEffect(() => {\n    const lifetimeObj = {};\n\n    mapData({\n      // theme\n      theme(value) {\n        setTheme(value)\n      },\n      // paired\n      pairedAmt(value) {\n        setPairedAmt(value)\n      },\n      // col\n      colAmtMap(value) {\n        for (let item of MARKET_POOL_LIST) {\n          if (value[item.col]) {\n            assetsMap[item.col] = value[item.col]\n          }\n        }\n        setAssetsMap(Object.assign({}, assetsMap))\n      },\n      // btoken\n      bTokenMap(value) {\n        for (let item of MARKET_POOL_LIST) {\n          if (value[item.colE]) {\n            assetsMap[item.colE] = {}\n            assetsMap[item.colE]['BRTOKEN'] = value[item.colE]['BRTOKEN']\n            assetsMap[item.colE]['BCTOKEN'] = value[item.colE]['BCTOKEN']\n          }\n        }\n        setAssetsMap(Object.assign({}, assetsMap))\n      },\n      // supply\n      poolLpReserveMap(value) {\n        for (let item of MARKET_POOL_LIST) {\n          if (value[item.colE]) {\n            supplyMap[item.colE] = value[item.colE]\n          }\n        }\n        setSupplyMap(Object.assign({}, supplyMap))\n      },\n      // 价格\n      colPriceMap(value) {\n        for (let item of MARKET_POOL_LIST) {\n          if (value[item.col]) {\n            priceMap[item.col] = value[item.col]\n          }\n        }\n        setPriceMap(Object.assign({}, priceMap))\n      },\n      bcPriceMap(value) {\n        for (let item of MARKET_POOL_LIST) {\n          if (value[item.colE]) {\n            priceMap[item.colE] = value[item.colE]\n          }\n        }\n        setPriceMap(Object.assign({}, priceMap))\n      },\n      // apy\n      lendApyMap(value) {\n        setLendApyMap(Object.assign({}, value))\n      },\n      borrowApyMap(value) {\n        setBorrowApyMap(Object.assign({}, value))\n      },\n    }, ctx, lifetimeObj);\n\n    return () => {\n      unmapActions(lifetimeObj);\n    }\n  }, []);\n\n  // methods\n  const changeVisible = (opVisible, item) => {\n    item.opVisible = !opVisible\n    setList([].concat(list))\n  }\n\n  const setIndex = (index, item) => {\n    item.index = index\n    setList([].concat(list))\n  }\n\n  const updateOpNum = (num, item, type = 'other', supply=[]) => {\n    item.opNum = num\n    const bcPrice = priceMap[item.colE]\n    if (type === 'borrow') {\n      item.impact = calPriceImpact(num, supply[0], supply[1], item.mintRatioText, type)\n      item.borrowInterest = (num * Number(item.mintRatioText) * (1 - bcPrice)).toFixed(4)\n    } else if (type === 'lend') {\n      item.impact = calPriceImpact(num, supply[0], supply[1], item.mintRatioText, type)\n      item.lendInterest = (num * ((1 / bcPrice) - 1)).toFixed(4)\n    }\n    setList([].concat(list))\n  }\n\n  const onDepositChange = (check, item) => {\n    item.depositCheck = !check\n    setList([].concat(list))\n  }\n\n  const handleOp = (col, type, opNum, ext) => {\n    let valid = checkOpValid(opNum)\n    if (!valid) {\n      return\n    }\n    console.log(col, type, opNum, valid)\n    if (type === 'borrow') {\n      ctx.event.emit('depositAndSwapToPaired', { col, num: opNum, ext });\n    }\n    if (type === 'lend') {\n      ctx.event.emit('lend', { col, num: opNum, ext });\n    }\n    if (type === 'deposit') {\n      ctx.event.emit('deposit', { col, num: opNum, ext });\n    }\n    if (type === 'mmDeposit') {\n      ctx.event.emit('mmDeposit', { col, num: opNum, ext });\n    }\n    if (type === 'repay') {\n      ctx.event.emit('repay', { col, num: opNum, ext });\n    }\n    if (type === 'redeem') {\n      ctx.event.emit('redeem', { col, num: opNum, ext });\n    }\n    if (type === 'collect') {\n      ctx.event.emit('collect', { col, num: opNum, ext });\n    }\n  }\n\n  const goSwap = (col) => {\n    let bctokenAddress = BTOKEN_ADDRESS[col]['BCTOKEN']\n    let url = Config.swapUrl + 'add/' + bctokenAddress + '/' + pairedAdress\n    window.open(url, '_blank')\n  }\n\n  // 弹窗\n  const handleOk = () => {\n    console.log('ok')\n  }\n  const handleCancel = () => {\n    setModalVisible(false)\n  }\n  const openModal = (item) => {\n    console.log(item)\n    setModalVisible(true)\n  }\n\n  // switch op\n  const getValidPoolList = (type = 'valid') => {\n    const list = Config.MARKET_POOL_LIST\n    let newList = []\n    for (let item of list) {\n      if (!item.inActiveFlag) {\n        newList.push(item)\n      }\n    }\n    return type === 'valid' ? newList : list\n  }\n\n  const showMyPosition = () => {\n    setSwitchMy(!switchMy)\n    const list = getValidPoolList()\n    let newList = []\n    for (let item of list) {\n      item.opVisible = false\n      item.index = 'borrow'\n      item.opNum = 0\n      if (!switchMy) {\n        const bcAssets = assetsMap[item.colE]\n        const brAmt = bcAssets['BRTOKEN']\n        const bcAmt = bcAssets['BCTOKEN']\n        if (brAmt || bcAmt) {\n          newList.push(item)\n        }\n      } else {\n        newList.push(item)\n      }\n    }\n    setList(newList)\n  }\n  const showInActive = () => {\n    setSwitchInActive(!switchInActive)\n    const list = getValidPoolList(!switchInActive ? 'all' : 'valid')\n    for (let item of list) {\n      item.opVisible = false\n      item.index = 'borrow'\n      item.opNum = 0\n    }\n    setList(list)\n  }\n\n  return (\n    <div className=\"page-center\" style={{ justifyContent: 'flex-start', paddingTop: '40px', padding: '8px 16px', width: '100%' }}>\n      <div className=\"flex\" style={{ width: '100%' }}>\n        <div className=\"flex1 tal\">\n          <Switch checked={switchInActive} onChange={() => { showInActive() }} />\n                    &nbsp;Show inactive pairs\n        </div>\n        <div className=\"flex1 tar\">\n          <Switch checked={switchMy} onChange={() => { showMyPosition() }} />\n                    &nbsp;Only show my positions\n        </div>\n      </div>\n      <div className={`card bg-${theme}`}>\n        <div className=\"card-container\">\n          <table className=\"card-table\">\n            <thead>\n              <tr>\n                {\n                  MARKET_TABLE_HEADER.map((text, i) =>\n                    <th key={i} className={`${text === 'Due Date' ? 'underline' : ''}`}>\n                      {\n                        text === 'Due Date' ?\n                          <Tooltip placement=\"topLeft\" title={`loan must be repaid before expiry or you will default and lose your collateral.`}>\n                            {text}\n                          </Tooltip>\n                          :\n                          text\n                      }\n                    </th>\n                  )\n                }\n              </tr>\n            </thead>\n            {\n              list.map((item, i) =>\n                <Row \n                  key={i} \n                  item={item} \n                  theme={theme} \n                  colAmt={assetsMap[item.col]} \n                  bcAssetsMap={assetsMap[item.colE]} \n                  pairedAmt={pairedAmt} \n                  colPrice={priceMap[item.col]} \n                  bcPrice={priceMap[item.colE]} \n                  lendApy={lendApyMap[item.colE]} \n                  borrowApy={borrowApyMap[item.colE]} \n                  supply={supplyMap[item.colE]} \n                  changeVisible={changeVisible} \n                  setIndex={setIndex} \n                  updateOpNum={updateOpNum} \n                  handleOp={handleOp} \n                  goSwap={goSwap} \n                  onDepositChange={onDepositChange} \n                  openModal={openModal} \n                />\n              )\n            }\n            {\n              list.length ? null :\n                <tbody>\n                  <tr>\n                    <td colSpan=\"4\" className=\"empty\">No pool in Market!</td>\n                  </tr>\n                </tbody>\n            }\n          </table>\n        </div>\n      </div>\n      <Modal title=\"Settings\" width={320} visible={modalVisible} onOk={handleOk} onCancel={handleCancel} footer={null} closable={false}>\n        <div className=\"dotted\">Slippage Tolerance %</div>\n        <Input\n          className=\"mine-input\"\n          placeholder={'Max Slippage %'}\n          value={modalNum}\n          onChange={(modalNum) => { setModalNum(modalNum) }}\n          balance={100}\n          theme={theme}\n        />\n      </Modal>\n    </div>\n  )\n};\n\nexport default PageView;\n"],"sourceRoot":""}